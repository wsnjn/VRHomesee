# 项目结构文档

本文档概述了 Homesee 智能全景看房系统 Spring Boot 后端的代码结构。详细说明了关键包的用途以及其中重要文件的具体作用。

## 文件树与描述

```
src/main/java/com/example/homesee
├── config/
│   └── CorsConfig.java               # 跨域资源共享 (CORS) 配置。允许来自前端（本地主机、生产环境域名）的请求。
│
├── controller/                       # REST Controllers - API 接口层
│   ├── AdminChannelController.java   # 管理员管理：聊天消息和社区帖子（删除、禁言、封禁）。
│   ├── AdminUserController.java      # 管理员管理：用户增删改查、统计、重置密码、搜索。
│   ├── AppointmentController.java    # 预约管理：通用预约创建、状态更新。
│   ├── CommunityController.java      # 社区功能：聊天群组、消息、社交动态、好友关系、媒体上传。
│   ├── DatabaseController.java       # 系统维护：数据库初始化、建表、样本数据（开发/设置用途）。
│   ├── LandlordHouseController.java  # 房东功能：房源管理（添加、更新、状态）、房东统计。
│   ├── LandlordTenantMatchingController.java # 房东功能：合同创建、租客匹配逻辑。
│   ├── MaintenanceController.java    # 维修管理：维修请求生命周期（上报、更新、修复追踪）。
│   ├── RoomInfoController.java       # 公共/通用：房源列表、详情、可用性、基础统计。
│   ├── RoomInfoFilterController.java # 搜索：高级筛选（位置、价格、标签）、获取筛选选项。
│   ├── RoomVrSceneController.java    # VR 功能：VR 场景数据获取和上传管理。
│   ├── SmartMatchingController.java  # AI 功能：智能匹配聊天记录和 AI 对话交互。
│   ├── TenantManagementController.java # 租客管理（后台）：合同生命周期、支付状态、水电读数。
│   ├── TenantMatchingController.java # 后台匹配：合同创建（管理员视图）、房源选择。
│   ├── UserController.java           # 用户认证：登录、注册、个人资料管理、头像上传。
│   └── ViewingAppointmentController.java # 看房预约：详细的看房预约流程（首选时间、反馈、分配中介）。
│
├── entity/                           # JPA Entities - 数据库实体模型
│   ├── Appointment.java              # 基础预约记录。
│   ├── ChatGroup.java                # 聊天群组元数据（名称、类型、群主）。
│   ├── ChatHistory.java              # AI 或系统聊天记录。
│   ├── ChatMessage.java              # 用户对用户或群组聊天消息。
│   ├── ContractChange.java           # 合同变更记录（续租、退租）。
│   ├── Friendship.java               # 用户好友关系对。
│   ├── GroupMember.java              # 用户与群组的映射及角色。
│   ├── HouseTour.java                # 导览数据（VR/图片链接）。
│   ├── MaintenanceRequest.java       # 维修工单详情（费用、状态、日期）。
│   ├── RentPayment.java              # 支付记录（金额、日期、状态）。
│   ├── RoomInfo.java                 # 核心房源实体：地址、价格、布局、房东关联。
│   ├── RoomVrScene.java              # 关联房源的 VR 元数据（场景名称、图片 URL）。
│   ├── SocialComment.java            # 社交帖子评论。
│   ├── SocialLike.java               # 社交帖子点赞。
│   ├── SocialPost.java               # 用户生成的社交动态内容（文本 + 媒体）。
│   ├── TenantManagement.java         # "合同"实体：关联租客、房东、房源；财务条款。
│   ├── User.java                     # 全局用户实体：认证凭证、个人资料、认证状态。
│   └── ViewingAppointment.java       # 详细看房请求：时间偏好、反馈、中介分配。
│
├── repository/                       # Spring Data JPA Repositories (数据访问层)
│   ├── [Entity]Repository.java       # 每个实体对应的接口，继承 JpaRepository (例如 UserRepository, RoomInfoRepository)。
│                                     # 提供标准 CRUD 和自定义 JPQL 查询。
│
├── service/                          # Service Layer - 业务逻辑层
│   ├── [Entity]Service.java          # 包含业务规则并调用 Repository 的类 (例如 UserService, RoomInfoService)。
```

## 关键概念定义

- **Controller (控制器)**: 处理传入的 HTTP 请求，验证输入，调用 Service，并返回响应。
- **Service (服务)**: 封装业务逻辑（例如：“预订前检查房间是否可用”，“计算应付租金”）。
- **Repository (仓库)**: 用于直接数据库交互的接口（SQL 生成）。
- **Entity (实体)**: 数据库表行的 Java 对象表示。


